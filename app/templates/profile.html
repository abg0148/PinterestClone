{% extends "base_authenticated.html" %}
{% from "components/board_tile.html" import board_tile, board_tile_styles %}

{% block title %}
    {% if user.id == current_user.id %}
        My Profile
    {% else %}
        {{ user.username }}'s Profile
    {% endif %}
{% endblock %}

{% block extra_styles %}
<style>
    .profile-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 24px;
    }

    .profile-header {
        display: flex;
        align-items: center;
        gap: 32px;
        margin-bottom: 48px;
    }

    .profile-picture {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        overflow: hidden;
    }

    .profile-picture img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .profile-info {
        flex: 1;
    }

    .profile-name {
        font-size: 36px;
        font-weight: 600;
        margin-bottom: 4px;
    }

    .profile-username {
        font-size: 18px;
        color: var(--text-secondary);
        margin-bottom: 24px;
    }

    .profile-bio {
        font-size: 16px;
        line-height: 1.5;
        margin-bottom: 24px;
        color: var(--text-primary);
    }

    .profile-actions {
        display: flex;
        gap: 16px;
        margin-top: 16px;
    }

    .profile-button {
        padding: 8px 16px;
        border-radius: 24px;
        font-weight: 500;
        text-decoration: none;
        cursor: pointer;
        border: none;
    }

    .primary-button {
        background-color: var(--primary-color);
        color: white;
    }

    .secondary-button {
        background-color: #efefef;
        color: var(--text-primary);
    }

    .boards-section {
        margin-top: 48px;
    }

    .boards-section h2 {
        font-size: 24px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 24px;
    }
</style>
{{ board_tile_styles() }}
{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <div class="profile-picture">
            <img src="{{ url_for('profile.profile_picture', user_id=user.id) }}" alt="{{ user.username }}'s picture">
        </div>
        <div class="profile-info">
            <h1 class="profile-name">{{ user.username }}</h1>
            <p class="profile-username">@{{ user.username }}</p>
            {% if user.bio %}
                <p class="profile-bio">{{ user.bio }}</p>
            {% endif %}
            {% if user.id == current_user.id %}
                <div class="profile-actions">
                    <a href="{{ url_for('profile.edit_profile') }}" class="profile-button secondary-button">Edit Profile</a>
                </div>
            {% endif %}
        </div>
    </div>

    <div class="boards-section">
        <h2>
            {% if user.id == current_user.id %}
                My Boards
            {% else %}
                {{ user.username }}'s Boards
            {% endif %}
        </h2>

        {% if boards %}
            <div class="boards-grid">
                {% for board in boards %}
                    {{ board_tile(board) }}
                {% endfor %}
            </div>
        {% else %}
            <p>No boards created yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
